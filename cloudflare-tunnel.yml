# Cloudflare Tunnel Configuration for CVLatex
# Domain: cvlatex.zapto.org

tunnel: your-tunnel-id
credentials-file: /path/to/tunnel/credentials.json

# Ingress rules - route traffic to your local CVLatex server
ingress:
  # Main domain - routes to your CVLatex application
  - hostname: cvlatex.zapto.org
    service: http://localhost:8000
    originRequest:
      httpHostHeader: cvlatex.zapto.org
  
  # Admin subdomain for monitoring (optional)
  - hostname: admin.cvlatex.zapto.org
    service: http://localhost:8000/debug/system
    originRequest:
      httpHostHeader: cvlatex.zapto.org
  
  # API subdomain (optional)
  - hostname: api.cvlatex.zapto.org
    service: http://localhost:8000/api
    originRequest:
      httpHostHeader: cvlatex.zapto.org
  
  # Catch-all rule (required as last rule)
  - service: http_status:404

# Additional configuration
originRequest:
  # Connection timeout
  connectTimeout: 30s
  # TLS settings
  tlsTimeout: 10s
  # Keep alive
  tcpKeepAlive: 30s
  # Headers
  httpHostHeader: cvlatex.zapto.org
  # Disable chunked encoding for better compatibility
  disableChunkedEncoding: true

# Logging and metrics (optional)
# metrics: localhost:8080
# loglevel: info 